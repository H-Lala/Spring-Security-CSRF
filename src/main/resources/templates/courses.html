<html xmlns:th="https://www.thymeleaf.org">
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xsi:schemaLocation="
		http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-4.2.xsd
		http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-4.3.xsd"/>
<http use-expressions="true">
    <intercept-url pattern="/courses" access="permitAll"/>
    <intercept-url pattern="/login" access="isAuthenticated()"/>
    <form-logout authentication-success-handler-ref="refererHandler" />
</http>
<beans:bean
        class="RefererRedirectionAuthenticationSuccessHandler"
        name="refererHandler"/>
<head>
    <title>Please Login</title>
</head>
<body>
<div th:fragment="content">
    <form name="f" th:action="@{/logout}" method="post">
        <fieldset>
            <div class="form-actions">
                <p>You are logged!</p>
                <button type="submit" class="btn">Logout</button>
                <input
                        th:type="hidden"
                        th:name="${_csrf.parameterName}"
                        th:value="${_csrf.token}"/>
            </div>
            <div>
                <input
                        th:type="hidden"
                        th:name="${_csrf.parameterName}"
                th:value="${_csrf.token}"/>
            </div>
            <br>
        </fieldset>
    </form>
</div>
</body>
</html>